{{!< main}}

<main class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Your Reviews</h1>
    <a href="/" class="btn btn-outline-primary">
      <i class="fas fa-arrow-left me-1"></i> Back to Browsing
    </a>
  </div>
  
  {{#if messages.success}}
    <div class="alert alert-success">{{messages.success}}</div>
  {{/if}}
  {{#if messages.error}}
    <div class="alert alert-danger">{{messages.error}}</div>
  {{/if}}
  
  {{#if reviews.length}}
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Property</th>
            <th>Rating</th>
            <th>Review</th>
            <th>Date</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {{#each reviews}}
            <tr>
              <td>
                <a href="/bnbs/{{property._id}}">{{property.title}}</a>
                <div class="text-muted small">
                  {{property.address.city}}, {{property.address.country}}
                </div>
              </td>
              <td>
                <div class="rating">{{renderStars rating}}</div>
                <div class="text-muted small">{{rating}}/5</div>
              </td>
              <td>
                <div class="review-preview">
                  {{truncate comment 100}}
                </div>
              </td>
              <td>
                <div class="text-nowrap">{{formatDate createdAt}}</div>
              </td>
              <td>
                <div class="btn-group">
                  <a 
                    href="/reviews/{{_id}}/edit" 
                    class="btn btn-sm btn-outline-primary"
                  >
                    <i class="fas fa-edit"></i>
                  </a>
                  <form 
                    action="/reviews/{{_id}}?_method=DELETE" 
                    method="POST"
                    class="d-inline"
                  >
                    <button 
                      type="submit" 
                      class="btn btn-sm btn-outline-danger"
                      onclick="return confirm('Are you sure you want to delete this review?');"
                    >
                      <i class="fas fa-trash"></i>
                    </button>
                  </form>
                </div>
              </td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  {{else}}
    <div class="card">
      <div class="card-body text-center py-5">
        <i class="far fa-comments fa-3x text-muted mb-3"></i>
        <h3>No Reviews Yet</h3>
        <p class="text-muted">
          You haven't reviewed any properties. Start exploring and share your experiences!
        </p>
        <a href="/" class="btn btn-primary mt-2">
          <i class="fas fa-search me-1"></i> Find a Place to Stay
        </a>
      </div>
    </div>
  {{/if}}
</main>